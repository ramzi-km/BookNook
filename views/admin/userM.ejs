<%- include('./partials/adminHeader.ejs') %>

<!-- ============================================================== -->
<!-- End Left Sidebar - style you can find in sidebar.scss  -->
<!-- ============================================================== -->
<!-- ============================================================== -->
<!-- Page wrapper  -->
<!-- ============================================================== -->
<div class="page-wrapper">
  <!-- ============================================================== -->
  <!-- Bread crumb and right sidebar toggle -->
  <!-- ============================================================== -->
  <div class="page-breadcrumb">
    <div class="row">
      <div class="col-12 d-flex no-block align-items-center">
        <h3 class="page-title">User management</h3>
      </div>
    </div>
  </div>
  <!-- ============================================================== -->
  <!-- End Bread crumb and right sidebar toggle -->
  <!-- ============================================================== -->
  <!-- ============================================================== -->
  <!-- Container fluid  -->
  <!-- ============================================================== -->
  <div class="container-fluid">
    <!-- ============================================================== -->
    <!-- Sales Cards  -->
    <!-- ============================================================== -->

    <!-- Column -->

    <!-- ============================================================== -->
    <!-- Sales chart -->
    <!-- ============================================================== -->
    <div class="row">
      <div class="col-md-12">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title"></h5>
            <div class="table-responsive">
              <table
                id="zero_config"
                class="table table-striped table-bordered"
              >
                <thead class="table-dark">
                  <tr>
                    <th class="text-white">N.O</th>
                    <th class="text-white">Name</th>
                    <th class="text-white">Email</th>
                    <th class="text-white">mobile</th>
                    <th class="text-white">Options</th>
                  </tr>
                </thead>
                <tbody>
                  <% users.forEach((user,index)=> { %>
                  <tr>
                    <td><%= index+1 %></td>
                    <td><%= user.name %></td>
                    <td><%= user.email %></td>
                    <td><%= user.mobile %></td>
                    <td>
                      <% if (user.block) { %>
                      <a
                        href="# "
                        class="btn btn-light btn-outline-secondary"
                        onclick="unblockAlert('<%=user._id %>','<%= user.name %>')"
                        ><i class="fa fa-unlock-alt text-success"></i>
                        Unblock</a
                      >
                      <% } else { %>
                      <a
                        href="#"
                        class="btn btn-light btn-outline-dark"
                        onclick="blockAlert('<%=user._id %>','<%= user.name %>')"
                        ><i class="fa fa-ban text-danger"></i> Block</a
                      >
                      <% } %>
                    </td>
                  </tr>
                  <% }) %>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- ============================================================== -->
  <!-- Sales chart -->
  <!-- ============================================================== -->
  <!-- ============================================================== -->
  <!-- Recent comment and chats -->
  <!-- ============================================================== -->

  <!-- ============================================================== -->
  <!-- Recent comment and chats -->
  <!-- ============================================================== -->
</div>
<!-- ============================================================== -->
<!-- End Container fluid  -->
<!-- ============================================================== -->
<!-- ============================================================== -->
<!-- footer -->
<!-- ============================================================== -->
<script>
   //---------block user alert-----------//
   function blockAlert(id,name){
    Swal.fire({
          text: `Do you really want to block '${name}' ?`,
          icon: 'warning',
          showCancelButton: true,
          confirmButtonColor: '#d33',
          cancelButtonColor: '#6c757d',
          confirmButtonText: 'Yes!',
          cancelButtonText: 'No',
        }).then((result) => {
          if (result.isConfirmed) {
            window.location.href = '/admin/userM/'+id
          }
        });
  }
   //---------unblock user alert-----------//
  function unblockAlert(id,name){
    Swal.fire({
          text: `Do you want to unblock '${name}' ?`,
          icon: 'warning',
          showCancelButton: true,
          confirmButtonColor: '#28a745',
          cancelButtonColor: '#6c757d',
          confirmButtonText: 'Yes',
          cancelButtonText: 'No',
        }).then((result) => {
          if (result.isConfirmed) {
            window.location.href = '/admin/userM/'+id
          }
        });
  }
</script>
<%- include('./partials/adminFooter.ejs') %>
